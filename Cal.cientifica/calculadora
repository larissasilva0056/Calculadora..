#include <stdio.h>
#include <math.h>

long long fatorial(int n) {
    if (n < 0) return -1;
    long long fat = 1;
    for (int i = 1; i <= n; i++) {
        fat *= i;
    }
    return fat;
}

int main() {
    int opcao;
    char continuar;
    double num1, num2, resultado;

    do {
        printf("\n--- CALCULADORA CIENTIFICA ---\n");
        printf("1. Adicao\n2. Subtracao\n3. Multiplicacao\n4. Divisao\n");
        printf("5. Potenciacao (x^y)\n6. Raiz Quadrada\n7. Seno\n8. Cosseno\n");
        printf("9. Tangente\n10. Logaritmo base 10\n11. Logaritmo Natural\n");
        printf("12. Exponencial (e^x)\n13. Fatorial\n14. Valor Absoluto\n");
        printf("15. Resto da Divisao\n16. Maximo de dois numeros\n17. Minimo de dois numeros\n");
        printf("18. Conversao Graus -> Radianos\n19. Conversao Radianos -> Graus\n");
        printf("20. Hipotenusa (a^2 + b^2)\n21. Sair\n");
        printf("Escolha uma operacao: ");
        scanf("%d", &opcao);

        if (opcao == 21) {
            break;
        }

        switch (opcao) {
            case 1:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", num1 + num2);
                break;
            case 2:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", num1 - num2);
                break;
            case 3:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", num1 * num2);
                break;
            case 4:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                if (num2 == 0) {
                    printf("Erro: divisao por zero.\n");
                } else {
                    printf("Resultado: %.2lf\n", num1 / num2);
                }
                break;
            case 5:
                printf("Digite a base e o expoente: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", pow(num1, num2));
                break;
            case 6:
                printf("Digite um numero: ");
                scanf("%lf", &num1);
                if (num1 < 0) {
                    printf("Erro: numero negativo.\n");
                } else {
                    printf("Resultado: %.2lf\n", sqrt(num1));
                }
                break;
            case 7:
                printf("Digite o angulo em graus: ");
                scanf("%lf", &num1);
                printf("Resultado: %.4lf\n", sin(num1 * M_PI / 180.0));
                break;
            case 8:
                printf("Digite o angulo em graus: ");
                scanf("%lf", &num1);
                printf("Resultado: %.4lf\n", cos(num1 * M_PI / 180.0));
                break;
            case 9:
                printf("Digite o angulo em graus: ");
                scanf("%lf", &num1);
                printf("Resultado: %.4lf\n", tan(num1 * M_PI / 180.0));
                break;
            case 10:
                printf("Digite um numero positivo: ");
                scanf("%lf", &num1);
                if (num1 <= 0) {
                    printf("Erro: numero invalido.\n");
                } else {
                    printf("Resultado: %.4lf\n", log10(num1));
                }
                break;
            case 11:
                printf("Digite um numero positivo: ");
                scanf("%lf", &num1);
                if (num1 <= 0) {
                    printf("Erro: numero invalido.\n");
                } else {
                    printf("Resultado: %.4lf\n", log(num1));
                }
                break;
            case 12:
                printf("Digite o expoente x: ");
                scanf("%lf", &num1);
                printf("Resultado: %.4lf\n", exp(num1));
                break;
            case 13:
                printf("Digite um numero inteiro: ");
                scanf("%lf", &num1);
                if (num1 < 0) {
                    printf("Erro: numero invalido.\n");
                } else {
                    printf("Resultado: %lld\n", fatorial((int)num1));
                }
                break;
            case 14:
                printf("Digite um numero: ");
                scanf("%lf", &num1);
                printf("Resultado: %.2lf\n", fabs(num1));
                break;
            case 15:
                printf("Digite dois numeros inteiros: ");
                scanf("%lf %lf", &num1, &num2);
                if ((int)num2 == 0) {
                    printf("Erro: divisao por zero.\n");
                } else {
                    printf("Resultado: %d\n", (int)num1 % (int)num2);
                }
                break;
            case 16:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", fmax(num1, num2));
                break;
            case 17:
                printf("Digite dois numeros: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Resultado: %.2lf\n", fmin(num1, num2));
                break;
            case 18:
                printf("Digite o angulo em graus: ");
                scanf("%lf", &num1);
                printf("Resultado em radianos: %.4lf\n", num1 * M_PI / 180.0);
                break;
            case 19:
                printf("Digite o angulo em radianos: ");
                scanf("%lf", &num1);
                printf("Resultado em graus: %.4lf\n", num1 * 180.0 / M_PI);
                break;
            case 20:
                printf("Digite os catetos a e b: ");
                scanf("%lf %lf", &num1, &num2);
                printf("Hipotenusa: %.2lf\n", hypot(num1, num2));
                break;
            default:
                printf("Opcao invalida!\n");
                break;
        }

        printf("\nDeseja realizar outra operacao? (s/n): ");
        scanf(" %c", &continuar);
    } while (continuar == 's' || continuar == 'S');

    printf("Calculadora encerrada. Ate logo!\n");
    return 0;
}
